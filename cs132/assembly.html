<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Assembly - Computer Systems Engineering Notes</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../intro.html">Introduction</a></li><li class="chapter-item "><a href="../cs118/index.html"><strong aria-hidden="true">1.</strong> CS118</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs118/floats.html"><strong aria-hidden="true">1.1.</strong> IEEE 754</a></li><li class="chapter-item "><a href="../cs118/oop.html"><strong aria-hidden="true">1.2.</strong> OOP Principles</a></li><li class="chapter-item "><a href="../cs118/exceptions.html"><strong aria-hidden="true">1.3.</strong> Java Exceptions & Generics</a></li></ol></li><li class="chapter-item "><a href="../cs126/index.html"><strong aria-hidden="true">2.</strong> CS126</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs126/arrays.html"><strong aria-hidden="true">2.1.</strong> Arrays & Linked Lists</a></li><li class="chapter-item "><a href="../cs126/analysis.html"><strong aria-hidden="true">2.2.</strong> Analysis of Algorithms</a></li><li class="chapter-item "><a href="../cs126/recursion.html"><strong aria-hidden="true">2.3.</strong> Recursive Algorithms</a></li><li class="chapter-item "><a href="../cs126/stacks.html"><strong aria-hidden="true">2.4.</strong> Stacks & Queues</a></li><li class="chapter-item "><a href="../cs126/lists.html"><strong aria-hidden="true">2.5.</strong> Lists</a></li><li class="chapter-item "><a href="../cs126/maps.html"><strong aria-hidden="true">2.6.</strong> Maps</a></li><li class="chapter-item "><a href="../cs126/hash.html"><strong aria-hidden="true">2.7.</strong> Hash Tables</a></li><li class="chapter-item "><a href="../cs126/sets.html"><strong aria-hidden="true">2.8.</strong> Sets</a></li><li class="chapter-item "><a href="../cs126/trees.html"><strong aria-hidden="true">2.9.</strong> Trees</a></li><li class="chapter-item "><a href="../cs126/pqs.html"><strong aria-hidden="true">2.10.</strong> Priority Queues</a></li><li class="chapter-item "><a href="../cs126/heaps.html"><strong aria-hidden="true">2.11.</strong> Heaps</a></li><li class="chapter-item "><a href="../cs126/skip-lists.html"><strong aria-hidden="true">2.12.</strong> Skip Lists</a></li><li class="chapter-item "><a href="../cs126/graphs.html"><strong aria-hidden="true">2.13.</strong> Graphs</a></li></ol></li><li class="chapter-item expanded "><a href="../cs132/index.html"><strong aria-hidden="true">3.</strong> CS132</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs132/logic.html"><strong aria-hidden="true">3.1.</strong> Digital Logic</a></li><li class="chapter-item expanded "><a href="../cs132/assembly.html" class="active"><strong aria-hidden="true">3.2.</strong> Assembly</a></li><li class="chapter-item "><a href="../cs132/memory.html"><strong aria-hidden="true">3.3.</strong> Memory Systems</a></li><li class="chapter-item "><a href="../cs132/io.html"><strong aria-hidden="true">3.4.</strong> I/O</a></li><li class="chapter-item "><a href="../cs132/architecture.html"><strong aria-hidden="true">3.5.</strong> Microprocessor Architecture</a></li></ol></li><li class="chapter-item "><a href="../cs141/index.html"><strong aria-hidden="true">4.</strong> CS141</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs141/types.html"><strong aria-hidden="true">4.1.</strong> Types & Typeclasses</a></li><li class="chapter-item "><a href="../cs141/recursion.html"><strong aria-hidden="true">4.2.</strong> Recursion</a></li><li class="chapter-item "><a href="../cs141/functions.html"><strong aria-hidden="true">4.3.</strong> Higher Order Functions</a></li><li class="chapter-item "><a href="../cs141/lazy.html"><strong aria-hidden="true">4.4.</strong> Lazy Evaluation</a></li><li class="chapter-item "><a href="../cs141/reasoning.html"><strong aria-hidden="true">4.5.</strong> Reasoning About Programs</a></li><li class="chapter-item "><a href="../cs141/functors.html"><strong aria-hidden="true">4.6.</strong> Functors & Foldables</a></li><li class="chapter-item "><a href="../cs141/applicatives.html"><strong aria-hidden="true">4.7.</strong> Applicative Functors</a></li><li class="chapter-item "><a href="../cs141/monads.html"><strong aria-hidden="true">4.8.</strong> Monads</a></li><li class="chapter-item "><a href="../cs141/tlp.html"><strong aria-hidden="true">4.9.</strong> Type-Level Programming</a></li></ol></li><li class="chapter-item "><a href="../es191/index.html"><strong aria-hidden="true">5.</strong> ES191</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es191/symbols-and-conventions.html"><strong aria-hidden="true">5.1.</strong> Circuit Symbols & Conventions</a></li><li class="chapter-item "><a href="../es191/nodal.html"><strong aria-hidden="true">5.2.</strong> Nodal Analysis</a></li><li class="chapter-item "><a href="../es191/mesh.html"><strong aria-hidden="true">5.3.</strong> Mesh Analysis</a></li><li class="chapter-item "><a href="../es191/thevenin.html"><strong aria-hidden="true">5.4.</strong> Thevenin Circuits</a></li><li class="chapter-item "><a href="../es191/rc.html"><strong aria-hidden="true">5.5.</strong> First Order RC Circuits</a></li><li class="chapter-item "><a href="../es191/rl.html"><strong aria-hidden="true">5.6.</strong> First Order RL Circuits</a></li><li class="chapter-item "><a href="../es191/ac.html"><strong aria-hidden="true">5.7.</strong> AC Circuits</a></li><li class="chapter-item "><a href="../es191/diodes.html"><strong aria-hidden="true">5.8.</strong> Diodes</a></li><li class="chapter-item "><a href="../es191/transistors.html"><strong aria-hidden="true">5.9.</strong> Transistors</a></li><li class="chapter-item "><a href="../es191/opamps.html"><strong aria-hidden="true">5.10.</strong> Op Amps</a></li><li class="chapter-item "><a href="../es191/filters.html"><strong aria-hidden="true">5.11.</strong> Passive Filters</a></li><li class="chapter-item "><a href="../es191/equations.html"><strong aria-hidden="true">5.12.</strong> Equation Reference</a></li></ol></li><li class="chapter-item "><a href="../es193/index.html"><strong aria-hidden="true">6.</strong> ES193</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es193/functions.html"><strong aria-hidden="true">6.1.</strong> Functions, Conics & Asymptotes</a></li><li class="chapter-item "><a href="../es193/complex.html"><strong aria-hidden="true">6.2.</strong> Complex Numbers</a></li><li class="chapter-item "><a href="../es193/vectors.html"><strong aria-hidden="true">6.3.</strong> Vectors</a></li><li class="chapter-item "><a href="../es193/matrices.html"><strong aria-hidden="true">6.4.</strong> Matrices</a></li><li class="chapter-item "><a href="../es193/equations.html"><strong aria-hidden="true">6.5.</strong> Simultaneous Linear Equations</a></li><li class="chapter-item "><a href="../es193/diff.html"><strong aria-hidden="true">6.6.</strong> Differentiation</a></li><li class="chapter-item "><a href="../es193/int.html"><strong aria-hidden="true">6.7.</strong> Integration</a></li><li class="chapter-item "><a href="../es193/diffeq.html"><strong aria-hidden="true">6.8.</strong> Differential Equations</a></li><li class="chapter-item "><a href="../es193/laplace.html"><strong aria-hidden="true">6.9.</strong> Laplace Transforms</a></li><li class="chapter-item "><a href="../es193/stats.html"><strong aria-hidden="true">6.10.</strong> Probability & Statistics</a></li><li class="chapter-item "><a href="../es193/equationref.html"><strong aria-hidden="true">6.11.</strong> Equation Reference</a></li></ol></li><li class="chapter-item "><a href="../es197/index.html"><strong aria-hidden="true">7.</strong> ES197</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es197/mech1.html"><strong aria-hidden="true">7.1.</strong> Translational Mechanical Systems</a></li><li class="chapter-item "><a href="../es197/mech2.html"><strong aria-hidden="true">7.2.</strong> Rotational Mechanical Systems</a></li><li class="chapter-item "><a href="../es197/electrical.html"><strong aria-hidden="true">7.3.</strong> Electrical Systems</a></li><li class="chapter-item "><a href="../es197/thermal.html"><strong aria-hidden="true">7.4.</strong> Thermal Systems</a></li><li class="chapter-item "><a href="../es197/data.html"><strong aria-hidden="true">7.5.</strong> Data Driven Models</a></li><li class="chapter-item "><a href="../es197/step1.html"><strong aria-hidden="true">7.6.</strong> First Order Step Response</a></li><li class="chapter-item "><a href="../es197/step2.html"><strong aria-hidden="true">7.7.</strong> Second Order Step Response</a></li><li class="chapter-item "><a href="../es197/transfer.html"><strong aria-hidden="true">7.8.</strong> Transfer Functions</a></li><li class="chapter-item "><a href="../es197/freq1.html"><strong aria-hidden="true">7.9.</strong> First Order Frequency Response</a></li><li class="chapter-item "><a href="../es197/freq2.html"><strong aria-hidden="true">7.10.</strong> Second Order Frequency Response</a></li></ol></li><li class="chapter-item "><a href="../cs241/index.html"><strong aria-hidden="true">8.</strong> CS241</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs241/os.html"><strong aria-hidden="true">8.1.</strong> Operating Systems</a></li><li class="chapter-item "><a href="../cs241/cn.html"><strong aria-hidden="true">8.2.</strong> Networks</a></li></ol></li><li class="chapter-item "><a href="../cs257/index.html"><strong aria-hidden="true">9.</strong> CS257</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs257/memory.html"><strong aria-hidden="true">9.1.</strong> Memory Systems</a></li><li class="chapter-item "><a href="../cs257/architecture.html"><strong aria-hidden="true">9.2.</strong> Processor Architecture</a></li><li class="chapter-item "><a href="../cs257/parallelism.html"><strong aria-hidden="true">9.3.</strong> Parallelism</a></li><li class="chapter-item "><a href="../cs257/io.html"><strong aria-hidden="true">9.4.</strong> I/O</a></li><li class="chapter-item "><a href="../cs257/embedded.html"><strong aria-hidden="true">9.5.</strong> Embedded Systems & Security</a></li></ol></li><li class="chapter-item "><a href="../cs261/index.html"><strong aria-hidden="true">10.</strong> CS261</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../cs261/methodologies.html"><strong aria-hidden="true">10.1.</strong> Requirements & Software Methodologies</a></li><li class="chapter-item "><a href="../cs261/modelling.html"><strong aria-hidden="true">10.2.</strong> System Modelling</a></li><li class="chapter-item "><a href="../cs261/design.html"><strong aria-hidden="true">10.3.</strong> System Design</a></li><li class="chapter-item "><a href="../cs261/testing.html"><strong aria-hidden="true">10.4.</strong> Testing & HCI</a></li></ol></li><li class="chapter-item "><a href="../es2c0/index.html"><strong aria-hidden="true">11.</strong> ES2C0</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es2c0/diodes.html"><strong aria-hidden="true">11.1.</strong> Diodes</a></li><li class="chapter-item "><a href="../es2c0/oscillators.html"><strong aria-hidden="true">11.2.</strong> Oscillators</a></li><li class="chapter-item "><a href="../es2c0/bjt.html"><strong aria-hidden="true">11.3.</strong> BJTs</a></li><li class="chapter-item "><a href="../es2c0/bjt-amps.html"><strong aria-hidden="true">11.4.</strong> BJT Amplifiers</a></li><li class="chapter-item "><a href="../es2c0/mosfet.html"><strong aria-hidden="true">11.5.</strong> MOSFETs</a></li><li class="chapter-item "><a href="../es2c0/mosfet-amps.html"><strong aria-hidden="true">11.6.</strong> MOSFET Amplifiers</a></li><li class="chapter-item "><a href="../es2c0/differential.html"><strong aria-hidden="true">11.7.</strong> Differential Amplifiers</a></li><li class="chapter-item "><a href="../es2c0/opamps.html"><strong aria-hidden="true">11.8.</strong> Op-Amps</a></li><li class="chapter-item "><a href="../es2c0/equations.html"><strong aria-hidden="true">11.9.</strong> Equation Reference</a></li></ol></li><li class="chapter-item "><a href="../es2c6/index.html"><strong aria-hidden="true">12.</strong> ES2C6</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es2c6/control.html"><strong aria-hidden="true">12.1.</strong> Control Systems</a></li><li class="chapter-item "><a href="../es2c6/mechanics.html"><strong aria-hidden="true">12.2.</strong> Drive Systems</a></li><li class="chapter-item "><a href="../es2c6/sensors.html"><strong aria-hidden="true">12.3.</strong> Sensors</a></li><li class="chapter-item "><a href="../es2c6/electromagnetics.html"><strong aria-hidden="true">12.4.</strong> Electromagnetics & Motors</a></li><li class="chapter-item "><a href="../es2c6/ac.html"><strong aria-hidden="true">12.5.</strong> AC Power</a></li><li class="chapter-item "><a href="../es2c6/3phase.html"><strong aria-hidden="true">12.6.</strong> Three Phase AC Systems</a></li></ol></li><li class="chapter-item "><a href="../es2c7/index.html"><strong aria-hidden="true">13.</strong> ES2C7</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es2c7/binomial.html"><strong aria-hidden="true">13.1.</strong> Binomial Theorem & Taylor Series</a></li><li class="chapter-item "><a href="../es2c7/matrices.html"><strong aria-hidden="true">13.2.</strong> Matrices & Quadratic Forms</a></li><li class="chapter-item "><a href="../es2c7/equations.html"><strong aria-hidden="true">13.3.</strong> Linear Simultaneous Equations</a></li><li class="chapter-item "><a href="../es2c7/eigen.html"><strong aria-hidden="true">13.4.</strong> Eigenvalues & Eigenvectors</a></li><li class="chapter-item "><a href="../es2c7/systems.html"><strong aria-hidden="true">13.5.</strong> Oscillators & State Space Systems</a></li><li class="chapter-item "><a href="../es2c7/calculus.html"><strong aria-hidden="true">13.6.</strong> Matrix Differential Calculus</a></li><li class="chapter-item "><a href="../es2c7/optimisation.html"><strong aria-hidden="true">13.7.</strong> Optimisation</a></li><li class="chapter-item "><a href="../es2c7/fourier.html"><strong aria-hidden="true">13.8.</strong> Fourier Series & Transforms</a></li><li class="chapter-item "><a href="../es2c7/z.html"><strong aria-hidden="true">13.9.</strong> Z Transforms</a></li><li class="chapter-item "><a href="../es2c7/pdes.html"><strong aria-hidden="true">13.10.</strong> Partial Differential Equations</a></li></ol></li><li class="chapter-item "><a href="../es2e3/index.html"><strong aria-hidden="true">14.</strong> ES2E3</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es2e3/logic.html"><strong aria-hidden="true">14.1.</strong> Logic</a></li><li class="chapter-item "><a href="../es2e3/hdl.html"><strong aria-hidden="true">14.2.</strong> Hardware Description Languages</a></li><li class="chapter-item "><a href="../es2e3/verilog.html"><strong aria-hidden="true">14.3.</strong> Structural & Behavioual Verilog</a></li><li class="chapter-item "><a href="../es2e3/design.html"><strong aria-hidden="true">14.4.</strong> FPGA Design Flow</a></li><li class="chapter-item "><a href="../es2e3/architecture.html"><strong aria-hidden="true">14.5.</strong> FPGA Architecture</a></li><li class="chapter-item "><a href="../es2e3/sequential.html"><strong aria-hidden="true">14.6.</strong> Sequential Verilog</a></li><li class="chapter-item "><a href="../es2e3/fsm.html"><strong aria-hidden="true">14.7.</strong> Finite State Machines</a></li><li class="chapter-item "><a href="../es2e3/verification.html"><strong aria-hidden="true">14.8.</strong> Verification</a></li><li class="chapter-item "><a href="../es2e3/arithmetic.html"><strong aria-hidden="true">14.9.</strong> FPGA Arithmetic</a></li><li class="chapter-item "><a href="../es2e3/timing.html"><strong aria-hidden="true">14.10.</strong> Timing & Pipelining</a></li><li class="chapter-item "><a href="../es2e3/interfaces.html"><strong aria-hidden="true">14.11.</strong> Hardware Interfaces</a></li><li class="chapter-item "><a href="../es2e3/processors.html"><strong aria-hidden="true">14.12.</strong> Processor Implementation</a></li></ol></li><li class="chapter-item "><a href="../es3c5/index.html"><strong aria-hidden="true">15.</strong> ES3C5</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es3c5/brief-notes.html"><strong aria-hidden="true">15.1.</strong> Brief Notes + Equations (Aaron)</a></li></ol></li><li class="chapter-item "><a href="../es3e6/index.html"><strong aria-hidden="true">16.</strong> ES3E6</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../es3e6/semiconductors.html"><strong aria-hidden="true">16.1.</strong> RF Semiconductors</a></li><li class="chapter-item "><a href="../es3e6/tlines.html"><strong aria-hidden="true">16.2.</strong> Transmission Lines</a></li><li class="chapter-item "><a href="../es3e6/smithchart.html"><strong aria-hidden="true">16.3.</strong> The Smith Chart</a></li><li class="chapter-item "><a href="../es3e6/narrowband.html"><strong aria-hidden="true">16.4.</strong> Narrowband Matching</a></li><li class="chapter-item "><a href="../es3e6/broadband.html"><strong aria-hidden="true">16.5.</strong> Broadband Matching</a></li><li class="chapter-item "><a href="../es3e6/waveguides.html"><strong aria-hidden="true">16.6.</strong> Waveguides</a></li><li class="chapter-item "><a href="../es3e6/coax.html"><strong aria-hidden="true">16.7.</strong> Coax & Microstrip Lines</a></li><li class="chapter-item "><a href="../es3e6/params.html"><strong aria-hidden="true">16.8.</strong> Network Parameters</a></li><li class="chapter-item "><a href="../es3e6/filters.html"><strong aria-hidden="true">16.9.</strong> Filters</a></li><li class="chapter-item "><a href="../es3e6/dividers.html"><strong aria-hidden="true">16.10.</strong> Power Dividers, Couplers & Resonators</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Computer Systems Engineering Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/Joeyh021/notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/Joeyh021/notes/edit/master/src/cs132/assembly.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="assembly"><a class="header" href="#assembly">Assembly</a></h1>
<h2 id="microprocessor-fundamentals"><a class="header" href="#microprocessor-fundamentals">Microprocessor Fundamentals</a></h2>
<h3 id="the-cpu"><a class="header" href="#the-cpu">The CPU</a></h3>
<ul>
<li>The CPU controls and performs the execution of instructions</li>
<li>Does this by continuously doing fetch-decode-execute cycle</li>
<li>Very complex, but two key components
<ul>
<li>Control Unit (CU)
<ul>
<li>Decodes the instructions and handles logistics</li>
</ul>
</li>
<li>Arithmetic Logic Unit (ALU)
<ul>
<li>Does maths</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="fetch-decode-execute"><a class="header" href="#fetch-decode-execute">Fetch-Decode-Execute</a></h3>
<ul>
<li>Three steps to every cycle
<ul>
<li>Fetch instructions from memory</li>
<li>Decode into operations to be performed</li>
<li>Execute to change state of CPU</li>
</ul>
</li>
<li>Takes place over several clock cycles</li>
</ul>
<p>The components of the CPU that are involved in the cycle:</p>
<ul>
<li>ALU</li>
<li>CU</li>
<li>Program Counter (PC)
<ul>
<li>Tracks the memory address of the next instruction to be executed</li>
</ul>
</li>
<li>Instruction Register (IR)
<ul>
<li>Contains the most recent instruction fetched</li>
</ul>
</li>
<li>Memory Address Register (MAR)
<ul>
<li>Contains address of the memory location to be read/written</li>
</ul>
</li>
<li>Memory Data/Buffer Register (MDR/MBR)
<ul>
<li>Contains data fetched from memory or to be written to memory</li>
</ul>
</li>
</ul>
<p>The steps of the cycle:</p>
<ul>
<li>Fetch
<ul>
<li>Instruction fetched from memory location held by PC</li>
<li>Fetched instruction stored in IR</li>
<li>PC incremented to point to next instruction</li>
</ul>
</li>
<li>Decode
<ul>
<li>Retrieved instruction decoded</li>
<li>Establish opcode type</li>
</ul>
</li>
<li>Execute
<ul>
<li>CU signals the necessary CPU components</li>
<li>May result in changes to data registers, ALU, I/O, etc</li>
</ul>
</li>
</ul>
<h2 id="the-68008"><a class="header" href="#the-68008">The 68008</a></h2>
<p>The 68008 is an example of a CPU. The &quot;programmer's model&quot; is an abstraction that represents the internals of the architecture. The internal registers as shown below are part of the programmer's model.</p>
<p><img src="./img/68k.png" alt="" /></p>
<ul>
<li>Internal registers are 32 bits wide</li>
<li>Internal data buses are 16 bit wide</li>
<li>8 bit external data bus</li>
<li>20 bit external address bus</li>
<li>D0-D7 are 32 bit registers used to store frequently used values
<ul>
<li>Can be long (32 bits), word (16 bits), or byte (8 bits)</li>
</ul>
</li>
<li>Status register (CCR) consists of 2 8-bit registers
<ul>
<li>Various status bits are set or reset depending upon conditions arising from execution</li>
</ul>
</li>
<li>A0-A6 are pointer registers</li>
<li>A7 is system stack pointer to hold subroutine return addresses</li>
<li>Operations on addresses do not alter status register/ CCR
<ul>
<li>Only ALU can incur changes in status</li>
</ul>
</li>
<li>The stack pointer is a pointer to the next free location in the system stack
<ul>
<li>Provides temporary storage of state, return address, registers, etc during subroutine calls and interrupts</li>
</ul>
</li>
</ul>
<p>The diagram shows the internal architecture of the CPU, and how the internal registers are connected via the buses. Note how and which direction data moves in, as indicated by the arrows on the busses.</p>
<p><img src="./img/68k-2.png" alt="" /></p>
<h2 id="register-transfer-language"><a class="header" href="#register-transfer-language">Register Transfer Language</a></h2>
<p>The fetch-decode-execute cycle is best described using Register Transfer Language (RLT), a notation used to show how data moves around the internals of a processor and between registers.</p>
<ul>
<li>For example <code>[MAR] &lt;- [PC]</code> denotes the transfer of the contents of the program counter to the memory address register</li>
<li>Computer's main memory is called Main Store (MS), and the contents of memory location <code>N</code> is denoted <code>[MS(N)]</code></li>
<li>RLT does not account for the pipelining of instructions</li>
<li>Fetching an instruction in RTL:</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>RLT</th><th>Meaning</th></tr></thead><tbody>
<tr><td><code>[MAR] &lt;- [PC]</code></td><td>Move contents of PC to MAR</td></tr>
<tr><td><code>[PC] &lt;- [PC] + 1</code></td><td>Increment PC</td></tr>
<tr><td><code>[MBR] &lt;- [MS([MAR])]</code></td><td>Read address from MAR into MBR.</td></tr>
<tr><td><code>[IR] &lt;- [MBR]</code> -</td><td>Load instruction into I</td></tr>
<tr><td><code>CU &lt;- [IR(opcode)]</code></td><td>Decode the instruction</td></tr>
</tbody></table>
</div>
<h2 id="assembly-language"><a class="header" href="#assembly-language">Assembly Language</a></h2>
<ul>
<li>Assembly is the lowest possible form of code</li>
<li>High level code (for example C) is compiled to assembly code</li>
<li>Assembly is then assembled into machine code (binary)</li>
<li>Assembly instructions map 1:1 to processor operations</li>
<li>Uses mnemonics for instructions, ie <code>MOV</code> or <code>ADD</code></li>
<li>Languages vary, but format tends to be similar: <code>LABEL: OPCODE OPERAND(S) | COMMENT</code></li>
</ul>
<p>An example program is shown below</p>
<pre><code>    ORG  $4B0      | this program starts at hex 4B0
    move.b #5, D0  | load D0 with number 5
    add.b  #$A, D0 | add 10 (0x0A) to D0
    move.b D0, ANS | move contents of D0 to ANS
ANS: DS.B 1        | leave 1 byte of memory empty and name it ANS
</code></pre>
<ul>
<li><code>#</code> indicates a literal</li>
<li><code>$</code> means hexadecimal</li>
<li><code>%</code> means binary</li>
<li>A number without a prefix is a memory address</li>
<li><code>ANS</code> is a symbolic name</li>
<li><code>ORG</code> (Origin) indicates where to load the program in memory</li>
<li><code>DS</code> (Define Storage) tells the assembler where to put data</li>
</ul>
<h3 id="the-68008-instruction-set"><a class="header" href="#the-68008-instruction-set">The 68008 Instruction Set</a></h3>
<ul>
<li>Instructions are commands that tell the processor what to do</li>
<li>5 main kinds of instructions
<ul>
<li>Logical
<ul>
<li>Bitwise operations</li>
<li><code>AND</code>, <code>LSL</code> (Logical Shift Left)</li>
</ul>
</li>
<li>Branch
<ul>
<li>Cause the processor to jump execution to a labelled address</li>
<li>Condition is specified by testing state of CCR set by previous instruction</li>
<li><code>BRA</code> - branch unconditionally</li>
<li><code>BEQ</code> - branch if equal</li>
</ul>
</li>
<li>System Control</li>
</ul>
</li>
<li>Instructions are also specified with their data type, <code>.b</code> for byte, <code>.w</code> for word, <code>.l</code> for long
<ul>
<li><code>move.w</code> moves 2 bytes</li>
</ul>
</li>
</ul>
<h4 id="data-movement"><a class="header" href="#data-movement">Data Movement</a></h4>
<ul>
<li>Similar to RTL</li>
</ul>
<pre><code>move.b D0,   D1 | [D1(0:7)] &lt;- [D0(0:7)]
move.w D0,   D1 | [D1(0:15)] &lt;- [D0(0:15)]
swap   D2       | swap lower and upper words
move.l $F20, D3  | [D3(24:31)] ← [MS($F20)]
                | [D3(16:23)] ← [MS($F21)]
                | [D3( 8:15)] ← [MS($F22)]
                | [D3( 0:7)] ← [MS($F23)]
                | copied 8 bytes at a time in big endian order
</code></pre>
<h4 id="arithmetic"><a class="header" href="#arithmetic">Arithmetic</a></h4>
<ul>
<li>Maths performed on the ALU</li>
<li>The 68008, like many older processors, has no FPU, so only integer operations are supported</li>
</ul>
<pre><code>add.l   Di, Dj  | [Dj] ← [Di] + [Dj]
addx.w  Di, Dj  | also add in x bit from CCR
sub.b   Di, Dj  | [Dj] ← [Dj] - [Di]
subx.b  Di, Dj  | also subtract x bit from CCR
mulu.w  Di, Dj  | [Dj(0:31)] ← [Di(0:15)] * [Dj(0:15)]
                | unsigned multiplication
muls.w  Di, Dj  | signed multiplication
</code></pre>
<h4 id="logical"><a class="header" href="#logical">Logical</a></h4>
<ul>
<li>Perform bitwise operations on data</li>
<li>Also done by ALU</li>
<li>AND, OR, etc but also shifts and rotates</li>
<li>Logical shift (<code>LSL</code>/<code>LSR</code>) adds a 0 when shifting
<ul>
<li>Bit shifted out goes into C and X</li>
</ul>
</li>
<li>Arithmetic shift preserves sign bit (<code>ASL</code>/<code>ASR</code>)</li>
<li>Normal rotate (<code>ROL</code>/<code>ROR</code>) moves the top of the bit to the bottom bit and also puts the top bit into C and X</li>
<li>Rotate through X (<code>ROXL</code>/<code>ROXR</code>) rotates the value through the X register</li>
</ul>
<pre><code>AND.B #$7F, D0 | [D0] &lt;- [D0] . [0x7F]
OR.B  D1,  D0 | [D0] &lt;- [D0] + [D1]
LSL D0,    2  | [D0] &lt;- [D0] &lt;&lt; [2]
</code></pre>
<h4 id="branch"><a class="header" href="#branch">Branch</a></h4>
<ul>
<li>Cause the processor to move execution to a new pointer (jump/GOTO)</li>
<li>Instruction tests the state of the CCR bits against certain condition</li>
<li>Bits set by previous instructions</li>
</ul>
<pre><code>BRA | branch unconditionally
BCC | branch on carry clear
BEQ | branch on equal
</code></pre>
<h4 id="system-control"><a class="header" href="#system-control">System Control</a></h4>
<ul>
<li>Certain instructions used to issue other commands to the microprocessor</li>
</ul>
<h2 id="subroutines-and-stacks"><a class="header" href="#subroutines-and-stacks">Subroutines and Stacks</a></h2>
<ul>
<li>Subroutines are useful for frequently used sections of code for obvious reasons</li>
<li>Can jump and return from subroutines in assembly
<ul>
<li><code>JSR &lt;label&gt;</code> - Jump to Subroutine</li>
<li><code>RTS</code> - Return from Subroutine</li>
</ul>
</li>
<li>When returning, need to know where to return to</li>
<li>The stack is used as a LIFO data structure to store return addresses</li>
<li><code>JSR</code> pushes the contents of the PC on the stack</li>
<li><code>RTS</code> pops the return address from the stack to the PC</li>
<li>Can nest subroutine calls and stack will keep track</li>
</ul>
<h2 id="addressing-modes"><a class="header" href="#addressing-modes">Addressing Modes</a></h2>
<ul>
<li>Addressing modes are how we tell the computer where to find the data it needs</li>
<li>5 Kinds in the 68006, and many other processors have equivalents
<ul>
<li>Direct</li>
<li>Immediate</li>
<li>Absolute</li>
<li>Address Register Indirect
<ul>
<li>5 variations</li>
</ul>
</li>
<li>Relative</li>
</ul>
</li>
</ul>
<h3 id="direct-addressing"><a class="header" href="#direct-addressing">Direct Addressing</a></h3>
<ul>
<li>Probably the simplest</li>
<li>The address of an operand is specified by either a data or address register</li>
</ul>
<pre><code>move D3, D2 | [D2] &lt;- [D3]
move D3, A2 | [A2] &lt;- [D3]
</code></pre>
<h3 id="immediate-addressing"><a class="header" href="#immediate-addressing">Immediate Addressing</a></h3>
<ul>
<li>The operand forms part of the instruction (is a literal) and remains a constant</li>
<li>Note the prefix <code>#</code> specifying a literal and the prefix specifying the base of the number</li>
</ul>
<pre><code>move.b #$42, D5 | [D5] &lt;- $42
</code></pre>
<h3 id="absolute-addressing"><a class="header" href="#absolute-addressing">Absolute Addressing</a></h3>
<ul>
<li>Operand specifies the location in memory</li>
<li>Does not allow for position-independent code: will always access the exact address given</li>
</ul>
<pre><code>move.l D2, $7FFF0 | [MS(7FFF0)] &lt;- [D2]
</code></pre>
<h3 id="address-register-indirect-addressing"><a class="header" href="#address-register-indirect-addressing">Address Register Indirect Addressing</a></h3>
<ul>
<li>Uses offsets/increments/indexing to address memory based upon the address registers</li>
<li>Bad, rarely used</li>
<li><strong>Not examinable</strong></li>
</ul>
<h3 id="relative-addressing"><a class="header" href="#relative-addressing">Relative Addressing</a></h3>
<ul>
<li>Specifies an offset relative to the program counter</li>
<li>Can be used to write position independent code</li>
</ul>
<pre><code>move 16(PC), D3 | [D3] &lt;- [MS(PC + 16)]
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../cs132/logic.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../cs132/memory.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../cs132/logic.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../cs132/memory.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
